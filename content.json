{"pages":[{"title":"å…³äºæˆ‘","text":"åŸºæœ¬ä¿¡æ¯ Browser: &nbsp; Search Engineï¼š&nbsp; Plantform: &nbsp; &nbsp;&nbsp; Editor: &nbsp; Visual Studio Code &nbsp;&nbsp; Jupyter Notebook &nbsp;&nbsp; Pycharm Fonts: &nbsp; Dejavu Sans Mono &nbsp;&nbsp; Monaco &nbsp;&nbsp; Roboto Indentation: &nbsp; 2 Spaces Writing: &nbsp; Typora Music: &nbsp; Netease cloud Player: &nbsp; PotPlayer Hobby: &nbsp; Meteorological &nbsp;&nbsp; Rail Transit è¶³è¿¹ // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹ var myChart = echarts.init(document.getElementById('echarts2456')); // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ® var data = [ {name: 'æˆéƒ½', value: 200},{name: 'è¥¿å®‰', value: 200}, {name: 'é’åŸå±±', value: 120},{name: 'éƒ½æ±Ÿå °', value: 120}, {name: 'é‡åº†', value: 200},{name: 'é•¿æ²™', value: 200}, {name: 'åå±±', value: 120},{name: 'å¹³é¥', value: 120}, {name: 'çµçŸ³', value: 120},{name: 'å¾å·', value: 120}, {name: 'å®¿è¿', value: 120},{name: 'ä¸Šæµ·', value: 200}, {name: 'å—äº¬', value: 200},{name: 'æ»å·', value: 120}, {name: 'æ·®å—', value: 120},{name: 'èšŒåŸ ', value: 120}, {name: 'åˆè‚¥', value: 200},{name: 'ä¸­åº™', value: 120}, {name: 'èŠœæ¹–', value: 120},{name: 'å¹¿å·', value: 200}, {name: 'é¡ºå¾·', value: 120}, ]; var geoCoordMap = { 'æˆéƒ½':[104.06,30.67],'è¥¿å®‰':[108.95,34.27],'é’åŸå±±':[103.57,30.90], 'éƒ½æ±Ÿå °':[103.61,30.98],'é‡åº†':[106.56,29.56],'é•¿æ²™':[113,28.21], 'åå±±':[110.08,34.47],'å¹³é¥':[112.18,37.20],'çµçŸ³':[111.77,36.88], 'å¾å·':[117.2,34.26],'å®¿è¿':[118.3,33.96],'ä¸Šæµ·':[121.48,31.22], 'å—äº¬':[118.78,32.04],'æ»å·':[118.31,32.31],'æ·®å—':[117.01,32.64], 'èšŒåŸ ':[117.37,32.92],'åˆè‚¥':[117.27,31.86],'ä¸­åº™':[117.47,31.59], 'èŠœæ¹–':[118.38,31.33],'å¹¿å·':[113.23,23.16],'é¡ºå¾·':[113.28,22.81], }; var convertData = function (data) { var res = []; for (var i = 0; i < data.length; i++) { var geoCoord = geoCoordMap[data[i].name]; if (geoCoord) { res.push({ name: data[i].name, value: geoCoord.concat(data[i].value) }); } } return res; }; option = { title : { text: '', subtext: '', left: 'center', top: 'top', textStyle: { color: '#fff' } }, tooltip: {}, backgroundColor: { type: 'linear', x: 0, y: 0, x2: 1, y2: 1, colorStops: [ { offset: 0, color: '#F0F8FF' // 0% å¤„çš„é¢œè‰² }, { offset: 1, color: '#091732' // 100% å¤„çš„é¢œè‰² } ], globalCoord: false // ç¼ºçœä¸º false }, geo: { map: 'china', show: true, roam: true, label: { emphasis: { show: false } }, itemStyle: { normal: { areaColor: '#D3D3D3', borderColor: '#3B5077', // shadowColor: '#1773c3', // shadowBlur: 20 }, emphasis: { areaColor: '#3CB371', } } }, series: [ { name: '', type: 'effectScatter', coordinateSystem: 'geo', data: convertData(data), symbolSize: function (val) { return val[2] / 20; }, showEffectOn: 'render', rippleEffect: { brushType: 'stroke' }, hoverAnimation: true, label: { normal: { formatter: '{b}', position: 'right', show: false } }, itemStyle: { normal: { color: '#ff4500', shadowBlur: 10, shadowColor: '#333' } }, zlevel: 1 } ] }; // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚ myChart.setOption(option);","link":"/about/index.html"},{"title":"","text":"layout: tags","link":"/tags/index.html"},{"title":"","text":"layout: categories","link":"/categories/index.html"}],"posts":[{"title":"Echartsè¶³è¿¹å›¾","text":"æ‘˜è¦Echartsæ˜¯ç™¾åº¦EFEå¯è§†åŒ–å›¢é˜Ÿå¼€å‘çš„åŸºäºJavascriptå¼€æºå¯è§†åŒ–å›¾è¡¨åº“ã€‚ç”±äºéƒ¨åˆ†blogæ–‡ç« ä¸­æœ‰å±•ç¤ºå›¾è¡¨çš„éœ€æ±‚ï¼ŒåŸºäºæ­¤ï¼Œæœ¬æ–‡ç ”ç©¶äº†å¦‚ä½•å°†Echartsçš„å›¾è¡¨åµŒå…¥åˆ°blogä¸­å»ã€‚ Hexoæ’ä»¶hexo-tag-echarts3æ˜¯ä¸€æ¬¾åœ¨Hexoåšå®¢ä¸­å¯¼å…¥echartså›¾è¡¨çš„æ’ä»¶ã€‚ä½†æ˜¯å®ƒä¸æ”¯æŒå¯¼å…¥åœ°å›¾ï¼ŒåŒæ—¶è¯¥æ’ä»¶è¦æ±‚æ‰€æœ‰æ¸²æŸ“çš„ä»£ç éƒ½å¿…é¡»åœ¨optionçš„å†…éƒ¨ï¼ˆå˜é‡optionä¸€èˆ¬ç”¨äºæŒ‡å®šäº†å›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®ï¼‰ã€‚å¦‚æœæœ‰è°ƒç”¨å¤–éƒ¨å‡½æ•°ã€å¤–éƒ¨å˜é‡çš„æƒ…å†µï¼Œæ•ˆæœå¯èƒ½å°±ä¸å¤ªå¥½ã€‚æ‰€ä»¥å¯¹æ’ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ”¯æŒäº†åœ°å›¾åŠŸèƒ½ï¼ŒåŒæ—¶æ”¹è¿›äº†æ¸²æŸ“æœºåˆ¶ï¼Œå³æ¸²æŸ“ä»£ç åªå«æœ‰optionï¼Œæˆ–è€…é™¤optionå¤–è¿˜è°ƒç”¨äº†å¤–éƒ¨çš„å‡½æ•°çš„æƒ…å†µéƒ½å¯ä»¥æˆåŠŸæ‰§è¡Œã€‚ æ’ä»¶ä¿®æ”¹å¼•å…¥åœ°å›¾é¦–å…ˆéœ€è¦ä¿®æ”¹å¼•å…¥çš„echartsæ–‡ä»¶ï¼Œå› ä¸ºechartsé€šç”¨åŒ…ä¸­ä¸å«æœ‰åœ°å›¾ç»„ä»¶ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨å®Œæ•´åŒ…æˆ–è€…åœ¨çº¿å®šåˆ¶çš„æ–¹å¼1&lt;script type=\"text/javascript\" src=\"https://cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js\"&gt;&lt;/script&gt; å¦Echartsç°åœ¨ä¸èƒ½å¤Ÿç›´æ¥ä¸‹è½½åœ°å›¾ï¼Œæ‰€ä»¥éœ€è¦èƒ½å¤Ÿæ‰¾åˆ°å¤–éƒ¨åœ°å›¾jsæ–‡ä»¶ã€‚å¯ä»¥ä»githubä¸Šä¸‹è½½China.jså†ä»æœ¬åœ°å¯¼å…¥ã€‚ä¾‹å¦‚ï¼šä¸‹è½½åˆ°/themes/ä¸»é¢˜å/source/js/ä¸­ï¼Œå¯¼å…¥æ–¹å¼ä¸ºï¼š1&lt;script type=\"text/javascript\" src=\"/js/echarts.js\"&gt;&lt;/script&gt; æˆ–è€…å¼•ç”¨çº¿ä¸Šæ–‡ä»¶ï¼š1&lt;script type=\"text/javascript\" src=\"http://gallery.echartsjs.com/dep/echarts/map/js/china.js\"&gt;&lt;/script&gt; æ³¨æ„ï¼šæ ¹æ®&lt;script&gt;åŠ è½½æœºåˆ¶ï¼Œå¼•ç”¨é¡ºåºå¿…é¡»å…ˆå¼•å…¥echarts.jsï¼Œåè½½å…¥åœ°å›¾jsæ–‡ä»¶ ä¿®æ”¹æ¸²æŸ“æ–¹å¼ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶template.htmlä»£ç 12345678&lt;script type=\"text/javascript\"&gt; // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹ var myChart = echarts.init(document.getElementById('&lt;%- id %&gt;')); // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ® &lt;%= sourceCode %&gt; // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚ myChart.setOption(option);&lt;/script&gt; ä¿®æ”¹index.jsæ–‡ä»¶12345678910111213function echartsMaps(args, content) { var template = fs.readFileSync(filePath).toString(), options = {}; if (content.length) { var options = content; } return _.template(template)({ id: 'echarts' + ((Math.random() * 9999) | 0), sourceCode: content, height: args[0] || 400, width: args[1] || '85%' });} å…¶ä¸­å‚æ•°contentä¸ºåµŒå…¥çš„ä»£ç ï¼Œä»¥ä¸Šä¿®æ”¹ä¼šå°†åµŒå…¥çš„ä»£ç ç›´æ¥æ¸²æŸ“ï¼Œä¹‹åè°ƒç”¨myChart.setOption(option);ä½¿ç”¨é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚ æ¸²æŸ“å›¾ æ€»ç»“æœ¬æ–‡å™è¿°äº†å¦‚ä½•å°†Echartsçš„å›¾è¡¨åµŒå…¥åˆ°blogä¸­ï¼Œç”±äºæˆ‘éœ€è¦ä½¿ç”¨è¶³è¿¹åœ°å›¾å¹¶ä¸”ä¼šè°ƒç”¨optionå¤–éƒ¨çš„å‡½æ•°ï¼Œæ‰€ä»¥ä¿®æ”¹äº†åŸæ¥çš„æ’ä»¶ã€‚ä¿®æ”¹åçš„æ’ä»¶åœ°å€ï¼šhexo-tag-echarts-chartï¼Œæ¬¢è¿è¯•ç”¨ã€‚ å‚è€ƒæ–‡çŒ®1ã€ä½¿ç”¨ ECharts3.0 åœ¨ Hexo æ­å»ºçš„åšå®¢ä¸­å»ºä¸€ä¸ªè¶³è¿¹ğŸ‘£é¡µé¢ | Docle ã® Blog2ã€åœ¨ Hexo ä¸­æ’å…¥ ECharts åŠ¨æ€å›¾è¡¨ - KChenâ€™s Blog3ã€è°ˆè°ˆscriptæ ‡ç­¾ä»¥åŠå…¶åŠ è½½é¡ºåºé—®é¢˜ï¼ŒåŒ…å« defer async - ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦4ã€æµè§ˆå™¨åŠ è½½ JS æ–‡ä»¶çš„å…ˆåé¡ºåºåŒå…·ä½“çš„è§£æå’Œæ‰§è¡Œæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ - çŸ¥ä¹5ã€kchen0x/hexo-tag-echarts3: A simple plugin for inserting ECharts 3 by using tags in Hexo","link":"/2018/12/08/Echartsè¶³è¿¹å›¾/"},{"title":"ä¸‰å¯¸æ°”åœ¨åƒèˆ¬ç”¨ï¼Œä¸€æ—¦æ— å¸¸ä¸‡äº‹ä¼‘","text":"å…¶å®äººç”Ÿå¾ˆé•¿ï¼Œé€‰æ‹©ä¸€ä¸ªè‡ªå·±çœŸæ­£æƒ³è¦ä»äº‹çš„é¢†åŸŸï¼Œæ²‰æ·€ä¸‹å»ï¼ŒæŠŠè‡ªå·±å˜å¾—æ›´å‰å®³ä¸€ç‚¹ã€‚å› ä¸ºå¯¹äºäººæ¥è¯´ä¸æ€•æœ‰ç¼ºç‚¹ï¼Œå°±æ€•æ²¡ç‰¹ç‚¹ã€‚ä½†ä¸è¦æƒ³ç€ä¸€å®šè¦æ¯”è°è°æ›´å¥½ï¼Œå› ä¸ºä¸è®ºä½ å¤šåŠªåŠ›ï¼Œæ€»æœ‰äººæ¯”ä½ å‰å®³ï¼Œä¹Ÿæ€»æœ‰äººæ°¸è¿œä¸å¦‚ä½ ã€‚å’Œåˆ«äººæ¯”è¾ƒå¤§æ¦‚æ˜¯ç”Ÿè€Œä¸ºäººæœ€å¯æ‚²çš„äº‹ã€‚æ€»è€Œè¨€ä¹‹ï¼Œä¸åº”å½“æœ‰å¤ªå¤šçš„æ¬²æœ›ï¼Œä¸è¦åšäº†ä¸€ä»¶äº‹å°±å¿…é¡»è¦å¾—åˆ°ä»€ä¹ˆã€‚ä½†è¡Œå¥½äº‹ï¼Œè«é—®å‰ç¨‹ã€‚ å…¶å®äººç”Ÿä¹Ÿå¾ˆçŸ­ï¼Œç”Ÿå‘½æ˜¯è„†å¼±çš„ï¼Œä¸€æ¬¡çœ‹ä¼¼æ™®é€šçš„ç†¬å¤œä¹Ÿè®¸å°±æ¦¨å¹²äº†ä½ å…¨éƒ¨çš„ç²¾åŠ›ï¼Œä¸€æ¬¡çœ‹ä¼¼æ™®é€šçš„ç–¾ç—…ä¹Ÿè®¸ä¼šæ¢æ¥äº†ä¸€å¼ è–„è–„çš„ç—…å±é€šçŸ¥ä¹¦ã€‚çè§†è‡ªå·±ï¼Œçè§†çè§†ä½ çš„äººï¼Œä¸åšè®©è‡ªå·±åæ‚”çš„äº‹ã€‚","link":"/2018/09/21/ä¸‰å¯¸æ°”åœ¨åƒèˆ¬ç”¨ï¼Œä¸€æ—¦æ— å¸¸ä¸‡äº‹ä¼‘/"},{"title":"Pythonæ¨¡æ‹Ÿè±†ç“£ç™»å½•ï¼ˆä¸€ï¼‰","text":"æ‘˜è¦æŠ“å–æ•°æ®çš„è¿‡ç¨‹ä¸­æœ‰æ—¶å€™éœ€è¦å®Œæˆæ¨¡æ‹Ÿç™»å½•çš„æ“ä½œï¼Œæœ¬æ–‡ä½¿ç”¨requestsåº“å®Œæˆè±†ç“£çš„æ¨¡æ‹Ÿç™»å½•ï¼Œå¹¶ä¿å­˜å·²ç™»å½•çš„Cookieï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ç™»å½•ã€‚ä¹‹åé€šè¿‡è®¿é—®ä¸ªäººä¸»é¡µéªŒè¯å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºå·²ç™»å½•çŠ¶æ€ã€‚ requestsè¯·æ±‚åˆ†æè¿‡ç¨‹é¦–å…ˆéœ€è¦ç ”ç©¶è±†ç“£çš„ç™»å½•æœºåˆ¶ï¼Œåœ¨è±†ç“£çš„ç™»å½•ç•Œé¢æŸ¥çœ‹ç™»å½•è¯·æ±‚æäº¤çš„è¡¨å•é¡¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å›¾ä¸­çš„Loginè¯·æ±‚ä¸ºpostç±»å‹ï¼ŒForm Dataè¡¨ç¤ºpoståˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºæ•°æ®å¹¶æœªåŠ å¯†ã€‚ 1ã€sourceè¡¨ç¤ºè¯¥ç™»å½•é¡µé¢æ˜¯ç”±è±†ç“£è¯»ä¹¦è·³è½¬è¿‡æ¥2ã€redirè¡¨ç¤ºç™»å½•åè·³è½¬åˆ°çš„url3ã€form_emailå’Œform_passwordåˆ†åˆ«è¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç 4ã€captcha-solutionåˆ™æ˜¯éªŒè¯ç 5ã€captcha-idéªŒè¯ç çš„idè¯¥å­—æ®µå¯ä»ç™»å½•é¡µé¢çš„HTMLä¸­è·å– ç¼–ç è¿‡ç¨‹1ã€åˆå§‹åŒ–å˜é‡ï¼š123456789101112131415161718192021def __init__(self): self.session = requests.Session() self.session.cookies = cookielib.LWPCookieJar(filename=\"cookies.txt\") self.url = 'https://accounts.douban.com/login' # ç™»å½•url self.redirurl = 'https://book.douban.com/mine' # é‡å®šå‘url self.email = '******' self.password = '******' # æ„é€ postæ•°æ® self.data = { 'redir': self.redirurl, 'form_email': self.email, 'form_password': self.password, 'login': 'ç™»å½•' } # æ„é€ ç”¨æˆ·ä»£ç† self.headers = { 'User-Agent': 'Mozilla/5.0 ' '(Windows NT 10.0; Win64; x64) ' 'AppleWebKit/537.36 (KHTML, like Gecko) ' 'Chrome/55.0.2883.87 Safari/537.36' } 2ã€å‘é€è¯·æ±‚æˆ‘ä»¬æ¨¡æ‹Ÿç™»å½•éœ€è¦çš„æ˜¯ç™»å½•ä¹‹åçš„é¡µé¢ï¼Œæ‰€ä»¥åˆ©ç”¨Sessionæ¥ç»´æŒä¸€ç§ä¼šè¯çŠ¶æ€ï¼Œå¹¶ä¸”ä¿å­˜ç™»å½•åçš„Cookieã€‚ä¸‹æ¬¡ç™»å½•æ—¶ç›´æ¥æºå¸¦Cookieå‘é€è¯·æ±‚ï¼Œæ— éœ€å†ä½¿ç”¨è´¦å·å¯†ç ã€‚åˆ¤æ–­ç™»å½•æ—¶æ˜¯å¦éœ€è¦éªŒè¯ç å…ˆä½¿ç”¨BeautifulSoupåº“æ¥è·å–ç™»å½•é¡µé¢çš„HTMLä»£ç ï¼Œä¹‹ååˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ¤æ–­å…¶ä¸­æ˜¯å¦æœ‰æ˜¾ç¤ºéªŒè¯ç çš„imgæ ‡ç­¾ï¼Œå¦‚æœæœ‰å¤„ç†éªŒè¯ç ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆå°±å°†å·²æœ‰çš„ä¿¡æ¯poståˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¿å­˜ç™»å½•åçš„Cookieã€‚ 12345678910111213def login(self): page = self.session.post(self.url, headers=self.headers) soup = BeautifulSoup(page.text, \"html.parser\") captcha = soup.find('img', id='captcha_image') if captcha is not None: self.process_captcha(page, captcha) afterLogin_page = self.session.post(self.url, data=self.data, headers=self.headers) else: afterLogin_page = self.session.post(self.url, data=self.data, headers=self.headers) # print(self.session.cookies) self.session.cookies.save(ignore_discard=True, ignore_expires=True) print(afterLogin_page.text) soup = BeautifulSoup(afterLogin_page.text, \"html.parser\") å…³äºCookieä¸SessionHttpæ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå› æ­¤å¹¶ä¸èƒ½è¿½è¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¸¸é‡‡ç”¨Sessionä¸Cookieç»“åˆçš„æ–¹å¼è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ã€‚Sessionä½äºæœåŠ¡å™¨ç«¯åªä¿å­˜å¯¹è¯ä¿¡æ¯ä½†æ˜¯ä¸èƒ½å¤Ÿè¯†åˆ«å‡ºå…·ä½“çš„ç”¨æˆ·ï¼ŒCookieä½äºå®¢æˆ·ç«¯ç”¨äºå­˜æ”¾ç”¨æˆ·ä¿¡æ¯ã€‚Cookieåœ¨ç™»å½•ç½‘ç«™æ—¶ä¼šç”±æœåŠ¡å™¨äº§ç”Ÿä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡ç™»å½•æ—¶ä¼šæºå¸¦Cookieï¼Œä¹‹åæœåŠ¡å™¨ä¾¿æ ¹æ®Cookieä¸­çš„Session IDè·Ÿè¸ªåˆ°ä¼šè¯ã€‚å¦‚æœä¼šè¯æœ‰æ•ˆï¼Œé‚£ä¹ˆä¼šåˆ¤æ–­ç”¨æˆ·å·²å¤„äºç™»å½•çŠ¶æ€ï¼Œå¦åˆ™å¯èƒ½ä¼šåˆ¤æ–­ç”¨æˆ·æ²¡æœ‰è®¿é—®æƒé™è¿›è€Œè·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚åŒæ—¶Cookieæ˜¯æœ‰è¿‡æœŸæ—¶é—´çš„ï¼Œè¶…è¿‡è¯¥æ—¶é—´Cookieå¤±æ•ˆï¼Œéœ€è¦é‡æ–°è·å–ã€‚è¿™åŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†é¿å…Cookieè¢«ä»–äººè·å–å¹¶é•¿æœŸä½¿ç”¨ã€‚ 3ã€å¤„ç†éªŒè¯ç è¿™é‡Œå…ˆä½¿ç”¨æ‰‹åŠ¨è¾“å…¥éªŒè¯ç çš„æ–¹å¼ï¼Œé¦–å…ˆæ‹¿åˆ°éªŒè¯ç å›¾ç‰‡çš„åœ°å€ï¼ˆè¿™ä¸ªåœ°å€æ˜¯ä¸´æ—¶çš„ï¼Œä¸€æ®µæ—¶é—´åä¼šå¤±æ•ˆï¼Œä½†å¯¹äºæ‰‹åŠ¨è¾“å…¥å¹¶ä¸å½±å“ï¼‰ï¼Œç„¶ååˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‹¿åˆ°captcha-idï¼Œå› ä¸ºå®ƒéœ€è¦ä¸éªŒè¯ç ä¸€åŒpoståˆ°æœåŠ¡å™¨ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718def process_captcha(self, page, captcha): # å¤„ç†éªŒè¯ç  # è·å¾—éªŒè¯ç å›¾ç‰‡åœ°å€ captcha_url = captcha['src'] # åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è·å¾—éªŒè¯ç ID pattern = re.compile('&lt;input type=\"hidden\" name=\"captcha-id\" value=\"(.*?)\"/') captcha_id = re.search(pattern, page.text).group(1) # å°†éªŒè¯ç å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ° urllib.request.urlretrieve(captcha_url, \"captcha.png\") try: image = Image.open('captcha.png') image.show() image.close() except Exception as e: print(\"æ‰“å¼€éªŒè¯ç å›¾ç‰‡å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é‡è¯•\") captcha = input('please input the captcha:') self.data['captcha-solution'] = captcha self.data['captcha-id'] = captcha_id 4ã€åˆ©ç”¨Cookieç™»å½•è½½å…¥æœ¬åœ°Cookieä¹‹åå†å‘é€getè¯·æ±‚åˆ°urlï¼Œä¹‹åå°†è¯·æ±‚åˆ°çš„HTMLæ–‡æœ¬å†™å…¥æ–‡ä»¶ã€‚æ³¨æ„ï¼šä»¥äºŒè¿›åˆ¶çš„ç±»å‹å†™å…¥éœ€è¦byteså¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨utf8ç¼–ç 12345678910def get_index(self): # æ ¹æ®æœ¬åœ°cookiesç™»å½• try: self.session.cookies.load(ignore_discard=True) except Exception as e: print(\"cookieæœªèƒ½åŠ è½½, åŸå› : \", e) response = self.session.get(self.redirurl, headers=self.headers) with open(\"index.html\", 'wb') as f: f.write(response.text.encode('utf8')) print(\"å·²è½½å…¥æœ¬åœ°Cookie\") æ€»ç»“è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œç¼–ç è¿‡ç¨‹ä¹Ÿä¸å¤æ‚ï¼ŒéªŒè¯ç çš„å¤„ç†æš‚æ—¶ä½¿ç”¨æ‰‹åŠ¨çš„æ–¹å¼ã€‚å…³äºè‡ªåŠ¨è¯†åˆ«è±†ç“£éªŒè¯ç çš„æ–¹å¼æ­£åœ¨ç ”ç©¶ä¸­ï¼Œç›®å‰æ•ˆæœè¿˜ä¸ç†æƒ³ã€‚å®Œæ•´ä»£ç ï¼šdouban_login_1.py å‚è€ƒæ–‡çŒ®1ã€python çˆ¬è™« cookie çš„ä¿å­˜å’ŒåŠ è½½ - ç›–å¨… - å¼€æºä¸­å›½2ã€Pythonçˆ¬è™«åŸºç¡€ç»ƒä¹ (åä¸€)ç®€å•æ¨¡æ‹Ÿè±†ç“£ç™»å½• - çŸ¥ä¹","link":"/2018/11/30/Pythonæ¨¡æ‹Ÿè±†ç“£ç™»å½•ï¼ˆä¸€ï¼‰/"},{"title":"äºŒåˆ†æœç´¢ç®—æ³•","text":"1.1 åŸºæœ¬çš„äºŒåˆ†æœç´¢(é€’å½’)1234567891011121314// æ™®é€šäºŒåˆ†ï¼šé€’å½’int BSearch1(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; if (left &gt; right) { return -1; } int mid = left + (right - left) / 2; if (ve[mid] &gt; target) { return BSearch1(ve, target); } else if (ve[mid] &lt; target) { return BSearch1(ve, target); } return ve[mid];} 1.2 åŸºæœ¬çš„äºŒåˆ†æœç´¢ï¼ˆå¾ªç¯ï¼‰1234567891011121314// æ™®é€šäºŒåˆ†ï¼šå¾ªç¯int BSearch2(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &gt; target) { right = mid - 1; } else if (ve[mid] &lt; target) { left = mid + 1; } else { return ve[mid]; } }} 2.1 æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸targetç›¸ç­‰çš„å…ƒç´ çš„ç´¢å¼•123456789101112int BSearch3(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &gt;= target) { right = mid - 1; } else { left = mid + 1; } } return ve[left] == target ? left : -1;} 2.2 æŸ¥æ‰¾æœ€åä¸€ä¸ªä¸targetç›¸ç­‰çš„å…ƒç´ çš„ç´¢å¼•123456789101112int BSearch4(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &lt;= target) { left = mid + 1; } else { right = mid - 1; } } return ve[right] == target ? right : -1;} 2.3 æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºtargetçš„å…ƒç´ ç´¢å¼•123456789101112int BSearch5(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &lt; target) { left = mid + 1; } else { right = mid - 1; } } return right;} 2.4 æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºtargetçš„å…ƒç´ ç´¢å¼•123456789101112int BSearch6(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &gt; target) { right = mid - 1; } else { left = mid + 1; } } return left;} 2.5 æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºç­‰äºtargetçš„å…ƒç´ çš„ç´¢å¼•123456789101112int BSearch7(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &lt;= target) { left = mid + 1; } else { right = mid - 1; } } return right;} 2.6 æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„å…ƒç´ çš„ç´¢å¼•123456789101112int BSearch8(vector&lt;int&gt; ve, int target) { int left = 0, right = ve.size()-1; while (left &lt;= right) { int mid = left + (right - left) / 2; if (ve[mid] &gt;= target) { right = mid - 1; } else { left = mid + 1; } } return left;} 2.7 æŸ¥æ‰¾targetæ‰€å¤„èŒƒå›´123456789// æŸ¥æ‰¾targetæ‰€å¤„èŒƒå›´ï¼Œæ²¡æœ‰è¿”å›-1vector&lt;int&gt; BSearch9(vector&lt;int&gt; vex, int target) { vector&lt;int&gt; res; int leftIndex = BSearch3(vex, target); int rightIndex = BSearch4(vex, target); res.push_back(leftIndex &lt; 0 ? -1 : leftIndex); res.push_back(rightIndex &lt; 0 ? -1 : rightIndex); return res;}","link":"/2018/06/13/äºŒåˆ†æœç´¢ç®—æ³•/"},{"title":"äºŒå‰æ ‘çš„ä¸­åºéå†","text":"æ–¹æ³•ä¸€ï¼šé€’å½’æ–¹å¼123456789101112class Solution {public: vector&lt;int&gt; res; vector&lt;int&gt; inorderTraversal(TreeNode* root) { if (root) { inorderTraversal(root-&gt;left); res.push_back(root-&gt;val); inorderTraversal(root-&gt;right); } return res; }}; æ–¹æ³•äºŒï¼šéé€’å½’ï¼ˆæ ˆ1ï¼‰è¯¥æ–¹å¼ä¸å‰åºéå†ä¸­æ–¹æ³•ä¸‰ç›¸ä¼¼ã€‚åªä¸è¿‡åœ¨é€æ­¥éå†å·¦å­èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­å¹¶ä¸è®°å½•éå†é¡ºåºï¼Œè€Œæ˜¯åœ¨æ ˆä¸­å–å‡ºçš„æ—¶å€™è®°å½•ã€‚å¹¶å°†æ¸¸æ ‡èŠ‚ç‚¹æŒ‡å‘å½“å‰ä»æ ˆä¸­å–å‡ºèŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ã€‚æŠŠä»–å½“æˆæ ¹èŠ‚ç‚¹ç»§ç»­éå†ã€‚123456789101112131415161718192021222324class Solution {public: vector&lt;int&gt; res; vector&lt;int&gt; inorderTraversal(TreeNode* root) { vector&lt;int&gt; res; if (!root) { return res; } stack&lt;TreeNode*&gt; s; TreeNode* node = root; while(!s.empty() || node) { if (node) { s.push(node); node = node-&gt;left; } else { TreeNode* temp = s.top(); s.pop(); res.push_back(temp-&gt;val); node = temp-&gt;right; } } return res; }}; æ–¹æ³•ä¸‰ï¼šéé€’å½’æ–¹æ³•ä¸‰åˆ©ç”¨äº†ä¸€ä¸ªæ¸¸æ ‡èŠ‚ç‚¹å’Œä¸€ä¸ªå‰é©±èŠ‚ç‚¹ã€‚æŒ‰ç…§ä¸­åºéå†çš„é¡ºåºï¼Œå‰é©±èŠ‚ç‚¹æ˜¯æ¸¸æ ‡èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚æ²¿ç€å·¦å­æ ‘éå†ï¼Œå¦‚æœå·¦å­æ ‘ä¸å­˜åœ¨ï¼Œåˆ™å°†å½“å‰æ¸¸æ ‡èŠ‚ç‚¹å¯¼å…¥åˆ—è¡¨ã€‚å¦‚æœå­˜åœ¨åˆ™å°†å½“å‰æ¸¸æ ‡èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸­åºéå†çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘è‡ªèº«ï¼ˆå‡è®¾è¿˜æ²¡æœ‰æŒ‡å‘çš„æƒ…å†µä¸‹ï¼‰ï¼Œè§å›¾ä¸­ç®­å¤´ã€‚å¦‚æœå·²ç»æŒ‡å‘è‡ªèº«ï¼Œé‚£ä¹ˆå°†å½“å‰èŠ‚ç‚¹å¯¼å…¥åˆ—è¡¨ã€‚å¹¶ä¸”æ¸¸æ ‡æŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œç»§ç»­å¾ªç¯ç›´åˆ°æ¸¸æ ‡èŠ‚ç‚¹æŒ‡ä¸ºç©ºã€‚ 12345678910111213141516171819202122232425262728293031class Solution {public: vector&lt;int&gt; inorderTraversal(TreeNode* root) { vector&lt;int&gt; res; if (!root) { return res; } TreeNode* pre; TreeNode* cur = root; while(cur) { if (!cur-&gt;left) { res.push_back(cur-&gt;val); cur = cur-&gt;right; } else { pre = cur-&gt;left; while(pre-&gt;right &amp;&amp; pre-&gt;right != cur) { pre = pre-&gt;right; } if (!pre-&gt;right) { pre-&gt;right = cur; cur = cur-&gt;left; } else { pre-&gt;right = NULL; res.push_back(cur-&gt;val); cur = cur-&gt;right; } } } return res; }};","link":"/2018/04/24/äºŒå‰æ ‘ä¸­åºéå†/"},{"title":"äºŒå‰æ ‘çš„å‰åºéå†","text":"æ–¹æ³•ä¸€ï¼šé€’å½’æ–¹å¼123456789101112class Solution {public: vector&lt;int&gt; res; vector&lt;int&gt; preorderTraversal(TreeNode* root) { if (root) { res.push_back(root-&gt;val); preorderTraversal(root-&gt;left); preorderTraversal(root-&gt;right); } return res; }}; æ–¹æ³•äºŒï¼šéé€’å½’ï¼ˆæ ˆ1ï¼‰é¦–å…ˆå°†æ ¹èŠ‚ç‚¹å…¥æ ˆã€‚ç„¶åå¾ªç¯éå†ï¼Œå–å‡ºæ ¹èŠ‚ç‚¹ï¼Œè€ƒè™‘åˆ°æ ˆçš„åè¿›å…ˆå‡ºåŸåˆ™ï¼Œé¦–å…ˆå…¥æ ˆå³è¾¹èŠ‚ç‚¹ï¼Œä¹‹åå…¥æ ˆå·¦è¾¹èŠ‚ç‚¹ã€‚å†æ¬¡å–å‡ºæ ˆé¡¶èŠ‚ç‚¹ç›´åˆ°æ ˆä¸ºç©ºã€‚ 12345678910111213141516171819202122class Solution {public: vector&lt;int&gt; preorderTraversal(TreeNode* root) { vector&lt;int&gt; res; if (!root) { return res; } stack&lt;TreeNode* &gt; s{{root}}; while(!s.empty()) { TreeNode* node = s.top(); res.push_back(node-&gt;val); s.pop(); if (node-&gt;right) { s.push(node-&gt;right); } if (node-&gt;left) { s.push(node-&gt;left); } } return res; }}; æ–¹æ³•ä¸‰ï¼šéé€’å½’ï¼ˆæ ˆ2ï¼‰1ã€æ–°å»ºæ ˆå¹¶ä¸”è®¾ç½®ä¸€ä¸ªæ¸¸æ ‡èŠ‚ç‚¹ï¼Œæ¸¸æ ‡èŠ‚ç‚¹èµ°è¿‡çš„è·¯å¾„å°±æ˜¯äºŒå‰æ ‘çš„å‰åºéå†é¡ºåºã€‚ 2ã€é¦–å…ˆå¾ªç¯æ¡ä»¶æ˜¯æ ˆä¸ä¸ºç©ºä¸”æ¸¸æ ‡èŠ‚ç‚¹å­˜åœ¨ã€‚æ¸¸æ ‡èŠ‚ç‚¹é¦–å…ˆä¸ºæ ¹èŠ‚ç‚¹ã€‚ 3ã€æ¸¸æ ‡èŠ‚ç‚¹æ²¿ç€è‡ªèº«å·¦å­æ ‘éå†ï¼Œå°†éå†é¡ºåºå­˜åˆ°åˆ—è¡¨å½“ä¸­ï¼Œå¹¶å°†éå†åˆ°çš„èŠ‚ç‚¹é€ä¸ªå…¥æ ˆï¼Œç›´åˆ°å·¦å­èŠ‚ç‚¹ä¸å­˜åœ¨ã€‚ 4ã€å–å‡ºæ ˆé¡¶å…ƒç´ çš„å³å­èŠ‚ç‚¹ä½œä¸ºæ¸¸æ ‡èŠ‚ç‚¹ï¼Œå› ä¸ºæ ˆé¡¶å…ƒç´ åœ¨åˆå§‹å…¥æ ˆçš„è¿‡ç¨‹ä¸­å·²ç»è¢«è®°å½•ï¼Œä¸å¿…é‡å¤è®°å½•ã€‚ï¼ˆä¹‹ååšçš„å®é™…ä¸Šæ˜¯å°†æ­¤æ—¶çš„æ¸¸æ ‡èŠ‚ç‚¹å½“åšæ ¹èŠ‚ç‚¹å†æ¬¡æ‰§è¡Œä»¥ä¸Šæ“ä½œï¼‰ã€‚ 5ã€ç›´åˆ°æ ˆä¸ºç©ºä¸”æ¸¸æ ‡èŠ‚ç‚¹ä¸å­˜åœ¨ã€‚ 1234567891011121314151617181920212223class Solution {public: vector&lt;int&gt; preorderTraversal(TreeNode* root) { vector&lt;int&gt; res; if (!root) { return res; } stack&lt;TreeNode*&gt; s; TreeNode* node = root; while (!s.empty() || node) { if (node) { res.push_back(node-&gt;val); s.push(node); node = node-&gt;left; } else { TreeNode* t = s.top(); s.pop(); node = t-&gt;right; } } return res; }};","link":"/2018/04/15/äºŒå‰æ ‘å‰åºéå†/"},{"title":"æŠ“å–çŸ¥ä¹ç”¨æˆ·åŠ¨æ€æ•°æ®","text":"ä¸€ã€ç®€ä»‹æ‰“å¼€çŸ¥ä¹æŸä¸ªç”¨æˆ·çš„ä¸»é¡µå¯ä»¥çœ‹åˆ°è¯¥ç”¨æˆ·èµåŒå›ç­”ã€å…³æ³¨ä¸“æ ã€å…³æ³¨é—®é¢˜ç­‰è¡Œä¸ºæ•°æ®ã€‚æœ¬æ–‡åˆ©ç”¨Pythonçš„requestsåº“æŠ“å–çŸ¥ä¹ç”¨æˆ·è¡Œä¸ºæ•°æ®å¹¶å­˜å…¥MongoDBæ•°æ®åº“ä¸­ã€‚ äºŒã€åˆ†ææ•°æ®åŠ è½½æ–¹å¼ æ‰“å¼€ç½‘é¡µåå‘ä¸‹æ‹‰å–å¯ä»¥è§‚å¯Ÿåˆ°è¡Œä¸ºæ•°æ®å¹¶ä¸æ˜¯ä¸€æ¬¡åŠ è½½å®Œï¼Œè€Œæ˜¯éšç€ç”¨æˆ·çš„æµè§ˆè¿›åº¦é€æ­¥åŠ è½½ï¼Œè€ƒè™‘å¯èƒ½æ˜¯ajaxçš„å½¢å¼ã€‚ ä¹‹åæ‰“å¼€Chromeæ§åˆ¶å°åˆ†æç½‘ç»œé€‰é¡¹ï¼ŒæŸ¥çœ‹XHR(XMLHttpRequest)ç±»å‹çš„æ–‡ä»¶å¯ä»¥è§‚å¯Ÿå‡ºæ”¶åˆ°çš„å“åº”æ˜¯jsonæ•°æ®ï¼Œå…¶ä¸­åŒ…å«äº†ç”¨æˆ·è¡Œä¸ºæ•°æ®çš„ç›¸å…³ä¿¡æ¯ æ‰€ä»¥é¦–å…ˆéœ€è¦è¯·æ±‚åˆ°ç½‘ç«™è¿”å›çš„jsonæ•°æ®ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œè§£æï¼Œç»“æ„åŒ–å¤„ç†ï¼Œå­˜å…¥MongoDBä¸­ã€‚ ä¸‰ã€ä»£ç åˆ†æ1ã€åˆå§‹åŒ–å˜é‡1234567891011121314151617181920212223def __init__(self): self.user_name = \"******\" self.max_search_counts = ** self.params = { \"limit\": 7, \"desktop\": \"True\" } self.base_url = \"https://www.zhihu.com/api/v4/members/\" self.url = self.base_url + '/' + self.user_name + '/activities?' + urlencode(self.params) self.headers = { \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64)\\ AppleWebKit/537.36 (KHTML, like Gecko)\\ Chrome/70.0.3538.77 Safari/537.36\", \"Referer\": \"https://www.zhihu.com/\", \"x-requested-with\": \"fetch\" } self.client = MongoClient('127.0.0.1',username='admin', password='******', authSource='admin', authMechanism='SCRAM-SHA-1') self.db = self.client[\"zhihu\"] self.collection = self.db[\"zhihuDynamic\"] 1ã€user_nameå¹¶ä¸æ˜¯ç”¨æˆ·çš„çŸ¥ä¹IDï¼Œè€Œæ˜¯ç”¨æˆ·çš„ä¸ªæ€§åŒ–åŸŸåã€‚æ¯”å¦‚çŸ¥ä¹å°ç®¡å®¶çš„ä¸ªæ€§åŒ–åŸŸåä¸ºzhihuadminï¼Œè¿™å¯ä»¥é€šè¿‡è§‚å¯Ÿç”¨æˆ·ä¸»é¡µçš„urlè·å¾—2ã€è¯·æ±‚çš„urlå°±æ˜¯è¿”å›jsonæ•°æ®ï¼Œåœ¨æ§åˆ¶å°çš„Networké€‰é¡¹ä¸­è§‚å¯Ÿåˆ°è¿”å›jsonæ•°æ®çš„urlç±»ä¼¼äºä»¥ä¸‹å½¢å¼ï¼š1https://www.zhihu.com/api/v4/members/zhihuadmin/activities?limit=7&amp;after_id=1542365521&amp;desktop=True åˆ†æç»„æˆå¯ä»¥çœ‹å‡ºhttps://www.zhihu.com/api/v4/members/ä¸ºé€šç”¨éƒ¨åˆ†ã€‚zhihuadminä¸ºç”¨æˆ·çš„ä¸ªæ€§åŒ–åŸŸåã€‚?ä¹‹åæ˜¯æºå¸¦çš„å‚æ•°3ã€æŠ“å–çŸ¥ä¹çš„æ•°æ®å¿…é¡»æºå¸¦ç”¨æˆ·ä»£ç†ã€‚ 2ã€å¼€å§‹æŠ“å–123456789101112def startSearch(self): for search_times in range(0, self.max_search_counts): json = self.get_Page(self.url) try: self.url = json.get(\"paging\").get(\"next\") print(self.url) except Exception as e: print(\"è·å–ä¸‹ä¸€æ¬¡è¯·æ±‚çš„é“¾æ¥å¤±è´¥ï¼Œå¤±è´¥åŸå› ï¼š\", e) results = self.get_Parse(json) print(\"=======================================\") for result in results: self.save_to_mongodb(result) forå¾ªç¯æ§åˆ¶æœç´¢æ¬¡æ•°ï¼Œæ¯æ¬¡æœç´¢ä¼šæŠ“å–7æ¡æ•°æ®å³7æ¬¡åŠ¨æ€ã€‚ä¹‹åæå–å‡ºæœ¬æ¬¡æŠ“å–åˆ°jsonæ•°æ®ä¸­çš„ç”¨æˆ·åŠ¨æ€ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä¸‹ä¸€æ¬¡æœç´¢çš„urlï¼Œå¹¶å°†æå–å‡ºçš„æ•°æ®å­˜å…¥MongoDBä¸­ 3ã€æŠ“å–jsonæ•°æ®12345678# è·å–jsonæ•°æ®def get_Page(self, url): try: response = requests.get(url, headers=self.headers) if response.status_code == 200: return response.json() except requests.ConnectionError as e: print(\"Error: \", e.args) ä¼ å…¥é¡µé¢çš„url,è¿”å›ç›¸åº”çš„jsonæ•°æ® 4ã€è§£æjsonæ•°æ®æ ¹æ®ä¼ å…¥jsonæ•°æ®çš„æ ¼å¼ï¼Œæå–ç”¨æˆ·çš„å„é¡¹åŠ¨æ€ 1234567891011121314151617181920212223# è§£æjsonæ•°æ®def get_Parse(self, json): if json: items = json.get('data') for item in items: zhihu = {} action_text = item.get(\"action_text\") created_time = item.get(\"created_time\") zhihu[\"æ“ä½œè¡Œä¸º\"] = action_text zhihu[\"æ—¶é—´\"] = time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(created_time)) if item.get('verb') == \"MEMBER_VOTEUP_ARTICLE\": item_detail = voteup_article(item.get(\"target\")) elif item.get('verb') == \"ANSWER_VOTE_UP\": item_detail = answer_voteUp(item.get(\"target\")) elif item.get('verb') == \"MEMBER_CREATE_ARTICLE\": item_detail = create_article(item.get(\"target\")) elif item.get('verb') == \"MEMBER_FOLLOW_COLUMN\": item_detail = follow_column(item.get('target')) elif item.get('verb') == \"ANSWER_CREATE\": item_detail = answer_create(item.get('target')) elif item.get('verb') == \"QUESTION_FOLLOW\": item_detail = question_follow(item.get('target')) yield dict(zhihu, **item_detail) 5ã€å°†è§£æå‡ºæ¥çš„æ•°æ®å¯¼å…¥åˆ°æ•°æ®åº“ä¸­1234# å¯¼å…¥åˆ°jsonæ•°æ®åº“ä¸­def save_to_mongodb(self, result): if self.collection.insert_one(result): print(\"Successful save to Mongodb\") å››ã€æ€»ç»“ä»£ç å†™çš„å¹¶ä¸å¥½ï¼Œä»…ä½œä¸ºå‚è€ƒã€‚å®Œæ•´ä»£ç : ç‚¹è¿™é‡Œ å‚è€ƒæ–‡çŒ®1ã€Authentication Examples â€” PyMongo 3.7.2 documentation2ã€Ajaxç»“æœæå– â€” Python3ç½‘ç»œçˆ¬è™«å¼€å‘å®æˆ˜3ã€çŸ¥ä¹å°ç®¡å®¶ â€” çŸ¥ä¹","link":"/2018/11/20/æŠ“å–çŸ¥ä¹ç”¨æˆ·åŠ¨æ€æ•°æ®/"},{"title":"æŠ“å–çŸ¥ä¹ç”¨æˆ·ç²‰ä¸æ•°æ®","text":"æ‘˜è¦æœ¬æ–‡æŠ“å–å¹¶åˆ†æäº†çŸ¥ä¹ç”¨æˆ·çš„ç²‰ä¸æ•°æ®ï¼ŒåŒ…æ‹¬ç²‰ä¸åã€ç²‰ä¸æ ‡é¢˜ã€ç²‰ä¸ç”·å¥³æ¯”ä¾‹ã€ç²‰ä¸å›ç­”é—®é¢˜æ¯”ä¾‹ã€ç²‰ä¸è¢«å…³æ³¨æ•°ç­‰æ•°æ®ã€‚ä¹‹ååˆ©ç”¨pyechartsåº“å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–æ˜¾ç¤ºã€‚ æŠ“å–æ•°æ®1ã€è¯·æ±‚çš„urlä¸ä»£ç†ä¸ä¹‹å‰ä¸€ç¯‡æ–‡ç« æŠ“å–çŸ¥ä¹ç”¨æˆ·åŠ¨æ€æ•°æ®ç±»ä¼¼ï¼Œè¿™é‡Œè¯·æ±‚çš„urlä¹Ÿæ˜¯è¿”å›jsonæ•°æ®ï¼Œæ‰€ä»¥åŒæ ·åœ¨æ§åˆ¶å°networké€‰é¡¹ä¸‹æ‰¾åˆ°è¯·æ±‚çš„urlï¼Œé€šè¿‡è§‚å¯Ÿå¤šä¸ªè¯·æ±‚çš„urlå°†å…¶åˆ†ä¸ºé€šç”¨éƒ¨åˆ†ä¸æ‰©å±•éƒ¨åˆ†ï¼Œå¦‚ä¸‹å½¢å¼ï¼š1234self.base_url = \"https://www.zhihu.com/api/v4/members/{user}/followers?{include}\"self.include = 'include=data%5B*%5D.answer_count%2Carticles_count%2C\\ gender%2Cfollower_count%2Cis_followed%2Cis_following%2C\\ badge%5B%3F(type%3Dbest_answerer)%5D.topics&amp;offset={offset}&amp;limit=20' å…¶ä¸­userä¸ºç”¨æˆ·çš„ä¸ªæ€§åŒ–åŸŸåï¼Œincludeä¸ºæ‰©å±•éƒ¨åˆ†çš„urlï¼Œoffsetä¸ºåç§»é‡ï¼Œå³ä»ç¬¬offsetæ¡æ•°æ®å¼€å§‹ã€‚ä»£ç†ä½¿ç”¨fake-useragentåº“ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½éšæœºç”Ÿæˆï¼Œä¿è¯æ¯æ¬¡è¯·æ±‚çš„headeréƒ½ä¸ä¸€æ ·ã€‚ 2ã€è®¾ç½®å¾ªç¯æŠ“å–é¦–å…ˆæ ¹æ®urlè¯·æ±‚jsonæ•°æ®ï¼Œä¹‹åå¤„ç†è¯·æ±‚åˆ°çš„æ•°æ®ï¼Œå¾—åˆ°ä¸€éƒ¨åˆ†ç²‰ä¸çš„ä¿¡æ¯ï¼Œå¦‚æœç²‰ä¸ä¿¡æ¯æ²¡æœ‰æŠ“å–å®Œï¼Œåˆ™å¯¹æŠ“å–çš„urlè¿›è¡Œæ›´æ–°ï¼Œç›´åˆ°æ•°æ®æŠ“å–å®Œæˆï¼Œç»“æŸçš„æ ‡å¿—ä¼šåœ¨è¯·æ±‚çš„jsonæ•°æ®ä¸­è·å–åˆ°ã€‚æœ€åå¯¹æå–åˆ°çš„æ‰€æœ‰æ•°æ®è¿›è¡Œä¿å­˜ã€‚ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021def start(self, username, savepath, savename): index = 0 flag = True while flag: offset=index*20 include = self.include.format(offset=offset) url = self.base_url.format(user=username, include=include) # è¯·æ±‚jsonæ•°æ® print(\"æ­£åœ¨è¿›è¡Œç¬¬{}æ¬¡è¯·æ±‚\".format(index+1)) jsonData = self.requests_source(url) # æå–éœ€è¦çš„æ•°æ® self.process_data(jsonData) # å¦‚æœä»ç„¶å­˜åœ¨æ•°æ®ï¼Œå¤„ç†ä¸‹ä¸€æ¬¡è¯·æ±‚ if jsonData.get('paging').get('is_end') is False: index = index + 1 self.header['user-agent'] = self.agent.random else: flag = False print(\"å®Œæˆè¯·æ±‚\") # ä¿å­˜æ•°æ® self.save_data(self.data, savepath, savename) 3ã€è¯·æ±‚ã€å¤„ç†æ•°æ®è¯·æ±‚å¤„ç†çš„è¿‡ç¨‹å¹¶ä¸å¤æ‚ï¼Œæ ¹æ®è¿”å›çš„çŠ¶æ€ç åˆ¤æ–­æ˜¯å¦æˆåŠŸæ‹¿åˆ°jsonï¼Œä¹‹åä¼šæ ¹æ®jsonçš„å…·ä½“å½¢å¼è§£ææ•°æ®ã€‚1234567891011121314151617181920212223def requests_source(self, url): try: response = requests.get(url, headers=self.header, timeout=(5,30)) if response.status_code == 200: return response.json() except requests.ConnectionError as e: print(\"è·å–è¯·æ±‚å¤±è´¥ï¼Œå¤±è´¥åŸå› ï¼š\", e)def process_data(self, jsonData): followers = jsonData.get('data') for follow in followers: name = self.read_data_from_jsonData(follow, 'name') headline = self.read_data_from_jsonData(follow, 'headline') gender = self.read_data_from_jsonData(follow, 'gender') follower_count = self.read_data_from_jsonData(follow, 'follower_count') answer_count = self.read_data_from_jsonData(follow, 'answer_count') self.data[name] = [headline, gender, follower_count, answer_count] print(name, self.data[name]) print('\\n')def read_data_from_jsonData(self, json, key): value = json.get(key) return value if value is not '' else 'Empty' 4ã€ä¿å­˜æ•°æ®è¿™é‡Œå°†æ‰€æœ‰ä¿¡æ¯ä¿å­˜åˆ°pklæ–‡ä»¶å½“ä¸­1234567def save_data(self, follower_data, savepath, savename): if not os.path.exists(savepath): os.mkdir(savepath) with open(os.path.join(savepath, savename), 'wb') as f: pickle.dump(follower_data, f) f.close() print(\"å®Œæˆå­˜å‚¨\") å®Œæˆæ‰€æœ‰ä¿¡æ¯çš„æŠ“å–ã€å¤„ç†åŠä¿å­˜ä¹‹åä¸‹ä¸€æ­¥å°±æ˜¯è§£æå¯è§†åŒ–è¿™äº›æ•°æ®ã€‚ å¯è§†åŒ–æ•°æ®å¯è§†åŒ–æ•°æ®åˆ©ç”¨äº†pyechartsåº“ä¸jiebaåº“ï¼Œå‰è€…ç”¨äºå¯è§†åŒ–å„ç±»å›¾è¡¨ï¼Œåè€…æ˜¯Pythonçš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ã€‚ 1ã€æ‰“å¼€pklæ–‡ä»¶ä¿å­˜pklæ–‡ä»¶çš„åç§°å¯ä»¥è‡ªè¡ŒæŒ‡å®šï¼Œæ¯æ¬¡æŠ“å–å¦‚æœæ–‡ä»¶åç§°æ”¹å˜é‚£ä¹ˆåˆ†ææ•°æ®çš„æ—¶å€™éœ€è¦ä¿®æ”¹ä»£ç ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æ­£åˆ™åŒ¹é…ï¼Œè¿™æ ·æ— éœ€å…³å¿ƒpklæ–‡ä»¶çš„åç§°å°±å¯ä»¥ç›´æ¥è¿è¡Œã€‚ä»£ç å¦‚ä¸‹ï¼š123456789101112for root, dirs, files in os.walk(os.path.join(os.path.dirname(__file__),'result')): # print(root) # å½“å‰ç›®å½•è·¯å¾„ # print(dirs) # å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰å­ç›®å½• # print(files) # å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰éç›®å½•å­æ–‡ä»¶ for file in files: try: file_name = re.search('(.*?).pkl', file).group() break except Exception as e: continuewith open('./result/'+file_name, 'rb') as f: followers_data = pickle.load(f) 2ã€æå–æ•°æ®ä¸ºäº†ä¾¿äºåˆ†æã€å¯è§†åŒ–æ•°æ®ï¼Œæ‰€ä»¥ä¼šå°†æ‰€æœ‰æ•°æ®æå–æˆ[(å…ƒç»„1), (å…ƒç»„2),...,(å…ƒç»„3)]çš„å½¢å¼ï¼Œä¾‹å¦‚æ€§åˆ«æ•°æ®çš„å½¢å¼ä¸º1[('ç”·æ€§': 32),('å¥³æ€§': 42),('ä¿å¯†': 52)] ç”Ÿæˆheadlineä¸ç”¨æˆ·åçš„è¯äº‘å›¾æ—¶ä½¿ç”¨jiebaåº“åˆ†è¯ï¼Œå…¶ä¸­åœ¨å¤„ç†headlineæ—¶éœ€è¦åˆ é™¤æ‰ä¸€äº›ç¬¦å·å­—ç¬¦ä¹‹åå†ç»Ÿè®¡è¯é¢‘12345678910111213def statistic_word_frequency(self, texts, stopwords): # ç»Ÿè®¡è¯é¢‘ statistic_dict = {} for text in texts: temp = jieba.cut(text, cut_all=False) for t in temp: if t in stopwords or t == 'Empty': continue; if t in statistic_dict.keys(): statistic_dict[t] += 1 else: statistic_dict[t] = 1 return list(statistic_dict.items()) stopwordsç”¨æ¥å­˜å‚¨éœ€è¦åˆ é™¤æ‰çš„ä¸€äº›å­—ç¬¦ã€‚ 3ã€ç¤ºä¾‹å›¾ç¤ºä¾‹å›¾æ˜¯éšæœºå¯»æ‰¾çš„ä¸€ä½çŸ¥ä¹ç”¨æˆ·è¿›è¡Œåˆ†æçš„ç»“æœ æ€»ç»“æœ¬æ–‡çš„æ€è·¯å‚è€ƒäº†çŸ¥ä¹ç”¨æˆ·Charlesçš„çˆ¬è™«é¡¹ç›®ã€‚æœ€ç»ˆå®Œæˆçš„ä»£ç ï¼šçŸ¥ä¹ç”¨æˆ·ç²‰ä¸ å‚è€ƒæ–‡çŒ®1ã€Charlesçš„çš®å¡ä¸˜2ã€pyecharts - A Python Echarts Plotting Library3ã€fxsjy/jieba: ç»“å·´ä¸­æ–‡åˆ†è¯","link":"/2018/12/13/æŠ“å–çŸ¥ä¹ç”¨æˆ·ç²‰ä¸æ•°æ®/"},{"title":"Vueç”Ÿå‘½å‘¨æœŸè§£æ","text":"ç®€ä»‹å®šä¹‰ï¼šæ¯ä¸ª Vue å®ä¾‹åœ¨è¢«åˆ›å»ºä¹‹å‰éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚ä¾‹å¦‚éœ€è¦è®¾ç½®æ•°æ®ç›‘å¬ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½å®ä¾‹åˆ° DOMã€åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–° DOM ç­‰ï¼Œä¸åŒçš„æ—¶æœŸå¯¹åº”ä¸åŒçš„å‘¨æœŸï¼› ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šä¸åŒå‘¨æœŸå¼€æ”¾å‡ºæ¥çš„æ¥å£ï¼› Vueçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ª: beforeCreate ã€created beforeMount ã€mounted beforeUpdateã€ updated beforeDestroyã€destroyed æµç¨‹è§£è¯»ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸã€‚æ­¤æ—¶\\$dataã€\\$elå’Œmessageå‡å¤„äºundefinedçŠ¶æ€ã€‚ï¼ˆå‰ç¼€ $ï¼Œä»¥ä¾¿ä¸ç”¨æˆ·å®šä¹‰çš„å±æ€§åŒºåˆ†å¼€æ¥ï¼‰ã€‚ beforeCreateï¼šæ­¤æ—¶ç»„ä»¶å®ä¾‹æœªåˆ›å»ºï¼Œå„ä¸ªå±æ€§å‡æ²¡æœ‰ç”Ÿæˆã€‚ ç¬¬äºŒæ­¥ï¼šInitã€injectionsã€ reactivityã€‚å±æ€§å‡å·²æ³¨å…¥ç»‘å®šï¼Œè€Œä¸”è¢«$watchå˜æˆreactivityã€‚ä½†æ˜¯$elè¿˜æ˜¯æ²¡æœ‰ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯DOMæ²¡æœ‰ç”Ÿæˆï¼› createdï¼š\\$dataå’Œmessageå‡å·²å­˜åœ¨ï¼Œ\\$elè¿˜æ²¡æœ‰ã€‚ ç¬¬ä¸‰æ­¥ï¼šåˆ¤æ–­vueå®ä¾‹ä¸­æ˜¯å¦æœ‰\\$elã€‚å¦‚æœæœ‰ï¼Œåˆ™åˆ¤æ–­æ˜¯å¦æœ‰templateã€‚å¦‚æœæ²¡æœ‰åˆ™åœ¨æ‰‹åŠ¨æŒ‚è½½\\$elä¹‹åï¼Œå†åˆ¤æ–­æ˜¯å¦æœ‰templateã€‚ ç¬¬å››æ­¥ï¼š 1ã€åœ¨å®ä¾‹å†…éƒ¨æœ‰templateå±æ€§çš„æ—¶å€™ï¼Œç›´æ¥ç”¨å†…éƒ¨çš„ï¼Œç„¶åè°ƒç”¨renderå‡½æ•°å»æ¸²æŸ“ã€‚ 2ã€åœ¨å®ä¾‹å†…éƒ¨æ²¡æœ‰æ‰¾åˆ°templateï¼Œå°±è°ƒç”¨å¤–éƒ¨çš„htmlã€‚å®ä¾‹å†…éƒ¨çš„templateå±æ€§æ¯”å¤–éƒ¨çš„ä¼˜å…ˆçº§é«˜ã€‚ 3ã€è¦æ˜¯å‰ä¸¤è€…éƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±æŠ›å‡ºé”™è¯¯ã€‚ beforeMountï¼šåªç¼–è¯‘äº†æ¨¡æ¿ï¼Œå¹¶æ²¡æœ‰æŒ‚è½½å±æ€§ã€‚å³æ­¤æ—¶å­˜åœ¨çš„è¿˜æ˜¯è™šæ‹ŸDOM ç¬¬äº”æ­¥ï¼šåˆ›å»ºvm.$elæ›¿æ¢è™šæ‹ŸDOMï¼ˆvmä¸ºåˆå§‹åŒ–çš„å®ä¾‹å¯¹è±¡ï¼‰ã€‚ mountedï¼šæ­¤æ—¶å±æ€§å·²æŒ‚è½½ã€‚\\$dataã€\\$elå’Œmessageå‡å¤„äºå·²å®šä¹‰çš„çŠ¶æ€ã€‚ beforeUpdateå’Œupdatedï¼šå½“æ•°æ®æ”¹å˜æ—¶ï¼Œè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ§åˆ¶viewå±‚é‡æ–°æ¸²æŸ“ã€‚ æ¸²æŸ“æ­¥éª¤ï¼šæ•°æ®æ”¹å˜â€”â€”å¯¼è‡´è™šæ‹ŸDOMçš„æ”¹å˜â€”â€”è°ƒç”¨è¿™ä¸¤ä¸ªç”Ÿå‘½é’©å­å»æ”¹å˜è§†å›¾ 1ã€åªæœ‰å½“æ•°æ®ä¸æ¨¡æ¿ä¸­çš„æ•°æ®ç»‘å®šæ‰ä¼šè¿™ä¸¤ä¸ªå‡½æ•°æ‰ä¼šæœ‰æ•ˆï¼› 123456789101112131415var vm = new Vue({ el: '#app', template: '&lt;div id=\"app\"&gt;&lt;/div&gt;', // è¿™é‡Œéœ€è¦æ˜¯&lt;div id=\"app\"&gt;{{a}}&lt;/div&gt;æ‰æœ‰æ•ˆæœ beforeUpdate: function() { console.log('è°ƒç”¨äº†beforeUpdate') }, updated: function() { console.log('è°ƒç”¨äº†uodated') }, data: { a: 1 }})vm.a = 2 // è™½ç„¶æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯å¹¶æœªä¸æ¨¡æ¿ç»‘å®šï¼Œæ‰€ä»¥æ§åˆ¶å°ä¸ä¼šæ‰“å°ä»»ä½•ä¸€æ¡è¯­å¥ 2ã€æ•°æ®æ”¹å˜åï¼Œåœ¨beforeUpdateå’Œupdatedä¸­åˆ†åˆ«console.log(this.$el)å‘ç°è¾“å‡ºç»“æœç›¸åŒ beforeUpdateï¼šæ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚updatedï¼šç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚ this.$elæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚æ‰€ä»¥æ›´æ–°ä¹‹åæ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¯ä»¥é€šè¿‡ 1console.log(\"çœŸå®çš„DOMç»“æ„: \"+ document.getElementById('app').innerHTML) è§‚å¯ŸçœŸå®çš„DOMç»“æ„æ¯”å¯¹ã€‚å®é™…ä¸­å¯ä»¥å‘ç°beforeUpdateä¸­è¿˜æ˜¯åŸæ¥çš„æ•°æ®ï¼Œupdatedå˜æˆäº†ä¹‹åçš„æ•°æ®ã€‚ beforeDestoryå’Œdestoryedï¼š1ã€ä½¿ç”¨app.$destroy()è¿›è¡Œé”€æ¯ï¼› é”€æ¯åDOMå…ƒç´ ä»ç„¶å­˜åœ¨ï¼Œä½†æ˜¯å†æ¬¡æ”¹å˜dataçš„å€¼ï¼ŒbeforeUpdateå’Œupdatedå‡ä¸èµ·ä½œç”¨ã€‚å³Vue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½¿ç”¨åœºæ™¯ï¼š beforeCreate : ä¸¾ä¸ªæ —å­ï¼šå¯ä»¥åœ¨è¿™åŠ ä¸ªloadingäº‹ä»¶ created ï¼šåœ¨è¿™ç»“æŸloadingï¼Œè¿˜åšä¸€äº›åˆå§‹åŒ–ï¼Œå®ç°å‡½æ•°è‡ªæ‰§è¡Œ mounted ï¼š åœ¨è¿™å‘èµ·åç«¯è¯·æ±‚ï¼Œæ‹¿å›æ•°æ®ï¼Œé…åˆè·¯ç”±é’©å­åšä¸€äº›äº‹æƒ… beforeDestroyï¼š ä½ ç¡®è®¤åˆ é™¤XXå—ï¼Ÿ destroyed ï¼šå½“å‰ç»„ä»¶å·²è¢«åˆ é™¤ï¼Œæ¸…ç©ºç›¸å…³å†…å®¹ ç¤ºä¾‹ä»£ç ï¼šï¼ˆç›‘æµ‹\\$elã€\\$dataã€\\$messageå˜åŒ–ï¼‰1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;vueç”Ÿå‘½å‘¨æœŸå­¦ä¹ &lt;/title&gt; &lt;script src=\"https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"app\"&gt; &lt;h1&gt;{{message}}&lt;/h1&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt; var vm = new Vue({ el: '#app', data: { message: 'Vueçš„ç”Ÿå‘½å‘¨æœŸ' }, // æ¨¡æ¿å°†ä¼š æ›¿æ¢ æŒ‚è½½çš„å…ƒç´  beforeCreate: function() { console.group('------beforeCreateåˆ›å»ºå‰çŠ¶æ€------'); console.log(\"%c%s\", \"color:red\" , \"el : \" + this.$el); //undefined console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); //undefined console.log(\"%c%s\", \"color:red\",\"message: \" + this.message) }, created: function() { console.group('------createdåˆ›å»ºå®Œæ¯•çŠ¶æ€------'); console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); //undefined console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); //å·²è¢«åˆå§‹åŒ– console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); //å·²è¢«åˆå§‹åŒ– }, beforeMount: function() { console.group('------beforeMountæŒ‚è½½å‰çŠ¶æ€------'); console.log(\"%c%s\", \"color:red\",\"el : \" + (this.$el)); //å·²è¢«åˆå§‹åŒ– console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); //å·²è¢«åˆå§‹åŒ– console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); //å·²è¢«åˆå§‹åŒ– }, mounted: function() { console.group('------mounted æŒ‚è½½ç»“æŸçŠ¶æ€------'); console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); //å·²è¢«åˆå§‹åŒ– console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); //å·²è¢«åˆå§‹åŒ– console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); //å·²è¢«åˆå§‹åŒ– }, beforeUpdate: function () { console.group('beforeUpdate æ›´æ–°å‰çŠ¶æ€===============ã€‹'); console.log(\"çœŸå®çš„DOMç»“æ„: \"+ document.getElementById('app').innerHTML) console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); }, updated: function () { console.group('updated æ›´æ–°å®ŒæˆçŠ¶æ€===============ã€‹'); console.log(\"çœŸå®çš„DOMç»“æ„: \"+ document.getElementById('app').innerHTML) console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); }, beforeDestroy: function () { console.group('beforeDestroy é”€æ¯å‰çŠ¶æ€===============ã€‹'); console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); console.log(\"%c%s\", \"color:red\",\"message: \" + this.message); }, destroyed: function () { console.group('destroyed é”€æ¯å®ŒæˆçŠ¶æ€===============ã€‹'); console.log(\"%c%s\", \"color:red\",\"el : \" + this.$el); console.log(this.$el); console.log(\"%c%s\", \"color:red\",\"data : \" + this.$data); console.log(\"%c%s\", \"color:red\",\"message: \" + this.message) } })&lt;/script&gt;&lt;/html&gt; å‚è€ƒæ–‡çŒ® è¯¦è§£vueç”Ÿå‘½å‘¨æœŸ - SegmentFaultæ€å¦ API - Vue.js vueç”Ÿå‘½å‘¨æœŸè¯¦è§£ - æ˜é‡‘ vue2 ä¸ºä»€ä¹ˆbeforeUpdateæ—¶çš„$el å’Œ$dataä¸updatedæ—¶çš„ä¸€æ ·","link":"/2018/06/10/Vueç”Ÿå‘½å‘¨æœŸè§£æ/"},{"title":"é™æ€èµ„æºåŠ é€Ÿ","text":"ç½‘ç«™çš„é™æ€èµ„æºä»‹ç»åœ¨ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°è§‚æµ‹å„ä¸ªç½‘ç«™çš„è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œå¯ä»¥çœ‹åˆ°headæ ‡ç­¾ä¸­å­˜åœ¨å¤§é‡å¼•ç”¨çš„jsã€cssæˆ–å…¶å®ƒç±»å‹çš„æ–‡ä»¶ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š1234&lt;!--æŒ‡å‘ç«™ç‚¹å†…éƒ¨çš„æ–‡ä»¶--&gt;&lt;meta content=\"/images/branding/googleg/1x/googleg_standard_color_128dp.png\" itemprop=\"image\"&gt;&lt;!--ç»å¯¹è·¯å¾„æŒ‡å‘å¤–éƒ¨ç«™ç‚¹çš„js--&gt;&lt;script src=\"http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js\"&gt;&lt;/script&gt; å¦‚æœç½‘ç«™è§„æ¨¡è¾ƒå°ã€èµ„æºè¯·æ±‚æ•°å°‘ã€å¯¹å­˜å‚¨ç©ºé—´ã€å¹¶å‘é‡çš„è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥å°è¯•å°†èµ„æºä»£ç ä¸ä¸šåŠ¡ä»£ç å­˜æ”¾åœ¨ä¸€èµ·çš„æ–¹å¼ã€‚å¦‚æœç½‘ç«™è§„æ¨¡æ‰©å¤§ï¼Œä¼˜åŒ–çš„æ–¹å¼ä¹Ÿæœ‰è®¸å¤šï¼Œå•ä»é™æ€èµ„æºçš„è§’åº¦çœ‹å¯ä»¥å°†èµ„æºæœåŠ¡å™¨ä¸ä¸šåŠ¡æœåŠ¡å™¨åˆ†ç¦»ã€‚è¿™å°±å¼•å…¥äº†CDNçš„æ¦‚å¿µ CDNï¼ˆContent Delivery Networkï¼‰CDNå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚é€šä¿—æ„ä¹‰ä¸Šè¯´å°±æ˜¯èƒ½å¤Ÿè®©ä½ è®¿é—®ç½‘ç«™çš„é€Ÿåº¦å˜å¿«ã€‚å¯ä»¥å°†èµ„æºç±»å‹çš„æ–‡ä»¶å­˜å‚¨åœ¨CDNæœåŠ¡å™¨ä¸­ï¼ŒCDNç³»ç»Ÿæ ¹æ®å½“å‰äº’è”ç½‘è¿è¡Œçš„å„é¡¹æŒ‡æ ‡å¦‚èŠ‚ç‚¹çš„è¿æ¥ã€è´Ÿè½½ã€åˆ°ç”¨æˆ·çš„å“åº”æ—¶é—´å’Œè·ç¦»ï¼Œå°†è¯·æ±‚å¯¼å‘ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚è¿™æ ·æ—¢ä¿è¯äº†è®¿é—®çš„ç¨³å®šæ€§ä¸é€Ÿåº¦ä¹Ÿé™ä½äº†ä¸šåŠ¡æœåŠ¡å™¨çš„èµ„æºæµé‡ã€‚å›½å†…åšCDNçš„å‚å•†æœ‰é˜¿é‡Œäº‘ã€ç™¾åº¦ã€ä¸ƒç‰›ã€åˆæ‹ç­‰ã€‚é˜¿é‡Œäº‘çš„å”®åä¿éšœæ˜¯æ¯”è¾ƒé è°±çš„ï¼Œå½“ç„¶ä»·æ ¼ä¹Ÿç›¸å¯¹è¾ƒé«˜ï¼Œå…¶ä»–å…¬å¸çš„äº§å“æ²¡ç”¨è¿‡ï¼Œä¸åšè¯„ä»·ã€‚å…¶ä¸­æœ‰ä¸€å®¶å«ç™½å±±äº‘çš„å…¬å¸ï¼Œäº§å“å¥½ä¸å¥½ä¸çŸ¥é“ï¼Œä½†é¢è¯•ä½“éªŒæ˜¯æå¥½çš„ã€‚ï¼ˆå¯æƒœæ²¡æœ‰è°ç»™æˆ‘å¹¿å‘Šè´¹ï¼‰ å›¾ç‰‡èµ„æºçš„å¤„ç†é™æ€ç«™ç‚¹ä¸­å¦‚æœå­˜åœ¨çš„å¤§é‡å›¾ç‰‡ï¼Œé‚£ä¹ˆå›¾ç‰‡è¯·æ±‚æ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´ç«™ç‚¹çš„è®¿é—®é€Ÿåº¦å˜æ…¢ã€‚æé«˜ç½‘ç«™çš„å›¾ç‰‡åŠ è½½é€Ÿåº¦å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨CDNï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¯¹å›¾ç‰‡æœ¬èº«è¿›è¡Œå‹ç¼©åˆå¹¶ã€‚è¿™é‡Œæä¾›ä¸€ç§æ€è·¯ï¼šæœ¬ç«™çš„åŸå§‹èƒŒæ™¯å›¾ç‰‡æ˜¯å¤§å°ä¸º4Må·¦å³æ ¼å¼ä¸ºpngçš„å›¾ç‰‡ã€‚ç»å‹ç¼©åå¤§å°ä¸º1Må·¦å³ï¼Œæ ¼å¼ä»ä¸ºpngï¼Œè‚‰çœ¼çœ‹ä¸å‡ºå˜åŒ–ï¼Œå‹ç¼©ç‡è¾¾åˆ°75%å·¦å³ã€‚å‹ç¼©ç«™ç‚¹TinyPNGã€‚ä½†æ˜¯å®æµ‹ä¸­è®¿é—®é€Ÿåº¦ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚æ‰€ä»¥å†æ¬¡å°†å›¾ç‰‡å‹ç¼©ä¸ºwebPæ ¼å¼ï¼Œè‚‰çœ¼ä»çœ‹ä¸å‡ºå˜åŒ–ï¼Œå‹ç¼©åº¦è¾¾åˆ°90%å·¦å³ã€‚å‹ç¼©ç«™ç‚¹Squooshã€‚ä½†æ˜¯è¯¥å›¾ç‰‡æ ¼å¼ç”±è°·æ­Œæ¨å‡ºï¼ŒChromeä¸Operaèƒ½å¤Ÿå®ç°æ”¯æŒï¼ŒFireFoxæš‚ä¸å¯ä»¥ï¼ˆæ®è¯´å¯èƒ½éœ€è¦åˆ°æ˜å¹´ä¸ŠåŠå¹´ï¼‰ã€‚æ‰€ä»¥ä½¿ç”¨Firefoxç­‰æµè§ˆå™¨è®¿é—®å¾—åˆ°çš„æ˜¯#e7e7e7ä¸ºèƒŒæ™¯è‰²çš„ç½‘ç«™ã€‚ å‚è€ƒæ–‡çŒ® CDNæ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨CDNæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ - çŸ¥ä¹ WebP ç›¸å¯¹äº PNGã€JPG æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ- çŸ¥ä¹ ç½‘ç«™åŠ è½½å›¾ç‰‡é€Ÿåº¦æ…¢å¦‚ä½•ä¼˜åŒ– - SegmentFault æ€å¦ webP - ç»´åŸºç™¾ç§‘","link":"/2018/05/17/é™æ€èµ„æºåŠ é€Ÿ/"},{"title":"æŠ“å–ç½‘æ˜“äº‘éŸ³ä¹æ¦œå•","text":"æ‘˜è¦æœ¬æ–‡åˆ†åˆ«åˆ©ç”¨Seleniumè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ä¸requestsåº“æŠ“å–ç½‘æ˜“äº‘éŸ³ä¹çš„æ¦œå•ï¼ŒåŒ…æ‹¬æ­Œæ›²åã€æ­Œæ›²æ—¶é•¿ä»¥åŠæ¼”å”±è€…ç­‰ä¿¡æ¯ã€‚Seleniumä»…ä»…æŠ“å–äº†é¦–ä¸ªæ¦œå•ï¼ŒrequestsæŠ“å–äº†æ‰€æœ‰æ¦œå•ã€‚æŠ“å–ä¹‹åå°†æ‰€æœ‰æ•°æ®å­˜å…¥MySQLæ•°æ®åº“ä¸­ã€‚ SeleniumæŠ“å–å•ä¸ªè¡¨å•Seleniumæ˜¯ä¸€ç§è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå®ƒå¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨çš„è¡Œä¸ºï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨äºçˆ¬è™«ã€‚ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ä¹‹åï¼Œå¯ä»¥è°ƒç”¨å„ç§ä¸»æµæµè§ˆå™¨ã€‚ä¸€èˆ¬åœ¨çˆ¬è™«çš„è¿‡ç¨‹å› ä¸ºæ•ˆç‡é—®é¢˜å¹¶ä¸æ‰“å¼€æµè§ˆå™¨ï¼Œè€Œä½¿ç”¨æ— ç•Œé¢çš„æ¨¡å¼ã€‚ æ‰§è¡Œè¿‡ç¨‹1ã€åˆå§‹åŒ–å˜é‡åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­åŒ…æ‹¬è¯·æ±‚çš„urlï¼Œè¯·æ±‚çš„æ•°ç›®ä»¥åŠæ•°æ®åº“çš„ä¸€äº›é…ç½®ã€‚seleniumä½¿ç”¨Chromeé©±åŠ¨ã€‚1234567891011121314def __init__(self): self.url = \"https://music.163.com\" self.count = 0 self.host = \"127.0.0.1\" self.user = \"root\" self.password = \"******\" self.db = \"spider\" self.chrome_option = Options() self.chrome_option.add_argument('--headless') self.DRIVER = webdriver.Chrome(chrome_options=self.chrome_option) # The format string is not really a normal Python format string. # You must always use %s for all fields. self.importSQL = \"\"\"INSERT INTO NetEaseCloudMusic(ID, musicName, time, singer) VALUES (%s, %s, %s, %s)\"\"\" 2ã€è¿æ¥MySQLæ•°æ®åº“ï¼Œå¹¶ä»é¦–é¡µè·³è½¬åˆ°æ¦œå•é¡µæ ¹æ®åˆå§‹åŒ–çš„æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œè¿æ¥ä¸Šæ•°æ®åº“åˆ é™¤æ—§è¡¨ï¼Œåˆ›å»ºæ–°è¡¨12345678910111213def connect_mysql(self): self.db = pymysql.connect(host=self.host, user=self.user, passwd=self.password, db=self.db) print(\"æˆåŠŸè¿æ¥Mysqlæ•°æ®åº“\") self.cursor = self.db.cursor() self.cursor.execute(\"DROP TABLE IF EXISTS NetEaseCloudMusic\") # å¦‚æœä½¿ç”¨å•å¼•å·ï¼Œéœ€è¦ sql = '''CREATE TABLE NetEaseCloudMusic( ID INT NOT NULL, musicName LONGTEXT, time LONGTEXT, singer LONGTEXT )''' self.cursor.execute(sql) æ¦œå•ä¿¡æ¯çš„urlä¸ºhttps://music.163.com/#/discover/toplistï¼Œæ‰€ä»¥éœ€è¦ä»é¦–é¡µè·³è½¬ã€‚è·³è½¬ä¹‹åè§‚å¯Ÿåˆ°æ¦œå•ä¿¡æ¯å¹¶ä¸æ˜¯ç›´æ¥åŠ è½½åœ¨ç½‘é¡µä¸­ï¼Œè€Œæ˜¯åœ¨é¡µé¢çš„iframeæ ‡ç­¾ä¸­ï¼Œæ‰€ä»¥éœ€è¦è·³è½¬åˆ°å­iframeæ‹¿åˆ°æ•°æ®123456789101112131415def jump_targetpage(self): # å…¶ä¸­ driver.get æ–¹æ³•ä¼šæ‰“å¼€è¯·æ±‚çš„URLï¼Œ # WebDriver ä¼šç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½å®Œæˆä¹‹åæ‰ä¼šè¿”å›ï¼Œ # å³ç¨‹åºä¼šç­‰å¾…é¡µé¢çš„æ‰€æœ‰å†…å®¹åŠ è½½å®Œæˆï¼ŒJSæ¸²æŸ“å®Œæ¯•ä¹‹åæ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ self.DRIVER.get(self.url) self.DRIVER.find_element_by_xpath('//ul[@class=\"nav\"]/li[2]').click() try: self.firstChild_iframe = self.DRIVER.find_element_by_id(\"g_iframe\") except Exception as e: print(\"Get iframe Failed: \", e) sleep(2) self.DRIVER.switch_to.frame(self.firstChild_iframe) table = self.DRIVER.find_element_by_tag_name('table') self.songList = table.find_elements_by_xpath('tbody/tr') return self.songList 3ã€æå–æ•°æ®å¹¶ä¿å­˜åˆ°æ•°æ®åº“ä¸­ä½¿ç”¨xpathæ¥æå–æ­Œæ›²åç§°ã€æ’­æ”¾æ—¶é•¿ã€æ¼”å”±è€…ç­‰ä¿¡æ¯ã€‚123456def start_search(self, song): songChildList = [] songChildList.append(song.find_element_by_xpath('td[2]//b').get_attribute('title')) songChildList.append(song.find_element_by_xpath('td[3]//span[@class=\"u-dur \"]').text) songChildList.append(song.find_element_by_xpath('td[last()]//span').get_attribute('title')) return songChildList ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶è®°å½•æ¯æ¬¡å¯¼å…¥çš„æ¡æ•°123456789def import_data(self, data): try: self.cursor.execute(self.importSQL, (self.count+1, data[0], data[1], data[2])) self.db.commit() self.count += 1 print(\"æˆåŠŸå¯¼å…¥ç¬¬{count}æ¡æ•°æ®\".format(count=self.count)) except Exception as e: print('å¯¼å…¥æ•°æ®å¤±è´¥ï¼š ', e) self.db.rollback() å°ç»“è¿™é‡Œå¹¶ä¸ä»‹ç»Seleniumçš„å…·ä½“ä½¿ç”¨æ–¹å¼ï¼Œä¾§é‡äºæŠ“å–çš„è¿‡ç¨‹æè¿°ä»¥åŠå¦‚ä½•å®ç°è¿™ä¸€è¿‡ç¨‹çš„ç®€å•ä»£ç ç¤ºä¾‹ã€‚å®Œæ•´ä»£ç ï¼šSeleniumæŠ“å–å•ä¸ªè¡¨å• requestsæŠ“å–æ‰€æœ‰è¡¨å•åˆ†æç½‘æ˜“äº‘éŸ³ä¹æ¦œå•é¡µé¢çš„ç½‘ç»œè¯·æ±‚ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ä»é»˜è®¤é¡µé¢https://music.163.com/#/discover/toplistè¯·æ±‚çš„å“åº”ä¿¡æ¯å¯ä»¥çœ‹åˆ°å„ç±»æ¦œå•çš„æ ‡é¢˜ä»¥åŠhrefå±æ€§ä¿¡æ¯ã€‚äº‹å®ä¸Šï¼Œé€šè¿‡è§‚å¯Ÿæµè§ˆå™¨åœ°å€æ çš„urlå¯ä»¥çœ‹å‡ºhrefçš„å±æ€§å€¼ä½äº#ä¹‹åï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªfragmentï¼Œè®¿é—®ç½‘ç«™ä¹‹åå¯ä»¥ç›´æ¥åˆ°è¾¾é¡µé¢çš„æŒ‡å®šä½ç½®ã€‚æˆ‘ä»¬éœ€è¦æå–å‡ºæ¯ä¸ªæ¦œå•çš„hrefå±æ€§ä¿¡æ¯ï¼Œå†é€ä¸ªè¯·æ±‚è¿™äº›urlï¼Œé€šè¿‡è¿”å›çš„å“åº”åˆ†æå‡ºæ¯ä¸ªurlä¸­åŒ…å«çš„æ­Œæ›²ä¿¡æ¯ï¼Œå†é€ä¸ªä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶ç»Ÿè®¡æ€»çš„æ•°æ®é‡ã€‚ è¯·æ±‚è¿‡ç¨‹åˆå§‹åŒ–å˜é‡ä»¥åŠè¿æ¥æ•°æ®åº“çš„éƒ¨åˆ†åœ¨ä½¿ç”¨seleniumè¯·æ±‚ä¸­å·²ç»ä»‹ç»è¿‡ï¼Œå¤§åŒå°å¼‚ã€‚æ­¤å¤„ä¸å†è¿‡å¤šä»‹ç»ï¼Œåœ¨æ–‡ç« ç»“å°¾å¤„ä¼šç»™å‡ºæºä»£ç çš„é“¾æ¥ã€‚å…³äºå‘èµ·è¯·æ±‚çš„å‡½æ•°éƒ¨åˆ†ï¼Œç”±äºè¯·æ±‚çš„urlåŒ…æ‹¬åˆå§‹çš„urlä»¥åŠæ¯ä¸ªæ¦œå•çš„urlï¼Œæ‰€ä»¥åœ¨è¯·æ±‚å‡½æ•°ä¸­è€ƒè™‘ä½¿ç”¨å¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥å…¶ä»–å‚æ•°åˆ™ä½¿ç”¨åˆå§‹åŒ–çš„urlï¼Œå¦åˆ™ä½¿ç”¨ä¼ å…¥çš„urlã€‚è¿‡ç¨‹å¦‚ä¸‹ï¼š 123456789101112131415def start_request(self, *arg): # å‘ç»™å®šçš„urlè¯·æ±‚æ•°æ®ï¼Œå¦‚æœargä¸ºç©ºï¼Œè¯·æ±‚åŸå§‹çš„urlï¼Œå¦åˆ™è¯·æ±‚arg url = arg if arg else self.url if isinstance(url, tuple): # argæ˜¯å…ƒç»„ç±»å‹ request_url = url[0] else: request_url = url try: response = requests.get(request_url, headers=self.header) if response.status_code == 200: print(\"è¯·æ±‚æˆåŠŸ\") return response except Exception as e: print(\"è¯·æ±‚å¤±è´¥ï¼Œå¤±è´¥åŸå› ï¼š\", e) å¤„ç†åŸå§‹è¯·æ±‚çš„æ•°æ®å¯¹åŸå§‹çš„urlå‘é€è¯·æ±‚æ—¶ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–æ‰€æœ‰æ¦œå•çš„hrefå±æ€§ï¼Œå†ä¸åŸå§‹çš„urlè¿›è¡Œæ‹¼æ¥ï¼ˆå› ä¸ºæ‹¼æ¥çš„urlå³ä½¿ä¸å¸¦æœ‰#ä¹Ÿä¼šè‡ªåŠ¨è·³è½¬ï¼Œæ‰€ä»¥ä»£ç ä¸­å¹¶æœªæ·»åŠ #ï¼‰ï¼Œå¾—åˆ°å¹¶è¯·æ±‚å•ä¸ªæ¦œå•çš„urlã€‚å•ä¸ªæ¦œå•çš„urlä¸­å¹¶ä¸èƒ½å¤Ÿæ‰¾åˆ°è§„åˆ™çš„æ­Œæ›²æ•°æ®ã€‚é€šè¿‡è§‚å¯Ÿå‘ç°æ‰€æœ‰æ­Œæ›²æ•°æ®éƒ½å­˜åœ¨å…¶ä¸­ä¸€ä¸ªtextareaçš„æ ‡ç­¾ä¸­ï¼Œæ ‡ç­¾ä¸­çš„æ•°æ®ä¸ºjsonæ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨è¿™äº›jsonæ•°æ®æå–æ­Œæ›²ä¿¡æ¯ã€‚è¿™é‡Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å°†å…¶æå–å‡ºæ¥ã€‚ 123456789101112131415161718def process_data(self, source_response): # å¤„ç†åŸå§‹urlçš„è¯·æ±‚ï¼Œæå–å¹¶å¤„ç†æ¯ä¸ªæ¦œå•çš„url pattern = re.compile('&lt;p class=\"name\"&gt;&lt;a href=\"(.*?)\" class=\"s-fc0\"&gt;') lists_link = pattern.findall(source_response.text) for list_link in lists_link: url = parse.urljoin(self.url, list_link) list_response = self.start_request(url) json_datas = self.process_jsondata(list_response) self.process_musicdata(json_datas)def process_jsondata(self, response): # æå–æ¯ä¸ªæ¦œå•çš„jsonæ•°æ® pattern = re.compile('.*?id=\"song-list-pre-data\".*?&gt;(.*?)&lt;/textarea&gt;') match = pattern.search(response.text) json_datas = json.loads(match.group(1)) with open('data.json', 'wb') as f: f.write(match.group(1).encode('utf8')) return json_datas å¤„ç†åŒ…å«æ­Œæ›²ä¿¡æ¯çš„jsonæ•°æ®æ­Œæ›²åä¸æ¼”å”±è€…éƒ½å¯ä»¥ç›´æ¥ä»jsonä¸­ç›´æ¥æ–¹ä¾¿çš„è¯»å–åˆ°ï¼Œä½†æ˜¯æ­Œæ›²çš„æ—¶é•¿å¹¶ä¸èƒ½ä»æ•°æ®ä¸­ç›´æ¥çœ‹å‡ºæ¥ã€‚æ‰€ä»¥å›åˆ°åŸå§‹æ¦œå•çš„å“åº”ä¸­å¯»æ‰¾ä¿¡æ¯ï¼Œå‘ç°äº†å¯èƒ½æ˜¯æ§åˆ¶æ­Œæ›²æ—¶é•¿æ˜¾ç¤ºçš„éƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š ä»¥ä¸‹è¯­å¥ä¸ºæ§åˆ¶æ­Œæ›²æ—¶é•¿æ˜¾ç¤ºçš„ä»£ç ï¼š1${dur2time(x.duration/1000)} å®é™…ä¸Šæˆ‘å¹¶æ²¡æœ‰åœ¨æ‰€æœ‰ç½‘ç»œè¯·æ±‚ä¸­æ‰¾åˆ°æœ‰å…³dur2timeçš„ä¿¡æ¯ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘è¿˜ä¸çŸ¥é“æ€æ ·åˆ†æè¿™ä¸€éƒ¨åˆ†ï¼‰ã€‚ä½†åœ¨jsonæ•°æ®ä¸­å­˜åœ¨durationçš„keyï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºdurationçš„æ•°å€¼å¯èƒ½ä¼šé€šè¿‡æŸç§è½¬æ¢ï¼Œæ˜¾ç¤ºä¸ºæ­Œæ›²æ—¶é•¿ã€‚å°†durationçš„å€¼é™¤ä»¥1000ä¸é¡µé¢ä¸­æ˜¾ç¤ºçš„æ­Œæ›²æ—¶é•¿å¯¹åº”èµ·æ¥ï¼Œè¯•ç€æ‰¾åˆ°å…¶ä¸­çš„è§„å¾‹ã€‚ 179.2 &nbsp;&nbsp; 02ï¼š59 216 &nbsp;&nbsp; 03ï¼š36 ä»ä»¥ä¸Šçš„å¯¹åº”å…³ç³»ä¸­åŸºæœ¬ä¸Šå¯ä»¥åˆ¤æ–­durationé™¤ä»¥1000å³æ˜¯æ­Œæ›²æ—¶é•¿çš„ç§’æ•°ã€‚åˆ°æ­¤å¯ä»¥ä¾¿å¯ä»¥å¯¹æ­Œæ›²çš„æ•°æ®è¿›è¡Œæå–ã€‚è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819def process_musicdata(self, json_datas): # å¤„ç†æ¯ä¸ªæ¦œå•çš„jsonæ•°æ® for json_data in json_datas: music_name = json_data.get(\"name\") play_time = self.process_playtime(json_data.get(\"duration\")/1000) singers = '' for artist in json_data.get(\"artists\"): singers += '/' + artist.get(\"name\") singers = singers.replace('/', '', 1) data = [music_name, play_time, singers] self.save_data(data)def process_playtime(self, duration): # å¤„ç†æ’­æ”¾æ—¶é—´æ•°æ® minutes = math.floor(duration/60) seconds = math.floor(duration%60) minutes = minutes if minutes &gt;= 10 else '0'+str(minutes) seconds = seconds if seconds &gt;= 10 else '0'+str(seconds) return '%s:%s' % (minutes, seconds) ä¿å­˜åˆ°æ•°æ®åº“ä¸­æ¯æ¬¡å¤„ç†ä¸€ä¸ªæ¦œå•çš„å“åº”ä¾¿ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚æœ¬æ¬¡æå–çš„æ‰€æœ‰æ­Œæ›²æ¦œå•ï¼Œå…±æœ‰1614æ¡éŸ³ä¹æ•°æ®12345678910def save_data(self, data): # ä¿å­˜æ•°æ®åˆ°æ•°æ®åº“ try: self.cursor.execute(self.importSQL, (self.count, data[0],data[1],data[2])) self.db.commit() print(\"æˆåŠŸå¯¼å…¥ç¬¬{count}æ¡æ•°æ®\".format(count=self.count)) self.count += 1 except Exception as e: print(\"å¯¼å…¥æ•°æ®å¤±è´¥ï¼Œå¤±è´¥åŸå› ï¼š\", e) self.db.rollback() æ€»ç»“æœ¬æ–‡åˆ†åˆ«ä½¿ç”¨äº†Seleniumä¸requestsä¸¤ç§æ–¹å¼æŠ“å–éŸ³ä¹æ¦œå•æ•°æ®ã€‚å®é™…æµ‹è¯•ä¸­Seleniumçš„æŠ“å–é€Ÿåº¦è¾ƒæ…¢ï¼Œä½†æ˜¯è¿‡ç¨‹ç›¸å¯¹ç®€å•ã€‚ä½¿ç”¨requestsè¯·æ±‚è¿‡ç¨‹ç¨æ˜¾å¤æ‚ï¼Œä½†æ˜¯é€Ÿåº¦è¾ƒå¿«ã€‚å®Œæ•´ä»£ç ï¼šæŠ“å–ç½‘æ˜“äº‘éŸ³ä¹æ¦œå• å‚è€ƒæ–‡çŒ®1ã€Selenium with Python Selenium Python Bindings 2 documentation2ã€Getting Started with Headless Chrome | Web | Google Developers3ã€2. å¿«é€Ÿå…¥é—¨ Selenium-Pythonä¸­æ–‡æ–‡æ¡£ 2 documentation4ã€python3 urllib.parse.urljoinï¼ˆï¼‰ç”¨æ³• - ä½™å®‰ - CSDNåšå®¢5ã€20.7. urllib.parse â€” Parse URLs into components &mdash; Python v3.2.6 documentation","link":"/2018/12/20/æŠ“å–ç½‘æ˜“äº‘éŸ³ä¹æ¦œå•/"}],"tags":[{"name":"Echarts","slug":"Echarts","link":"/tags/Echarts/"},{"name":"Javascript","slug":"Javascript","link":"/tags/Javascript/"},{"name":"å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“","slug":"å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“","link":"/tags/å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“/"},{"name":"Python","slug":"Python","link":"/tags/Python/"},{"name":"éªŒè¯ç ","slug":"éªŒè¯ç ","link":"/tags/éªŒè¯ç /"},{"name":"cookies","slug":"cookies","link":"/tags/cookies/"},{"name":"æ¨¡æ‹Ÿç™»å½•","slug":"æ¨¡æ‹Ÿç™»å½•","link":"/tags/æ¨¡æ‹Ÿç™»å½•/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","link":"/tags/æ•°æ®ç»“æ„/"},{"name":"C++","slug":"C","link":"/tags/C/"},{"name":"äºŒå‰æ ‘","slug":"äºŒå‰æ ‘","link":"/tags/äºŒå‰æ ‘/"},{"name":"ajax","slug":"ajax","link":"/tags/ajax/"},{"name":"MongoDB","slug":"MongoDB","link":"/tags/MongoDB/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","link":"/tags/æ­£åˆ™è¡¨è¾¾å¼/"},{"name":"è¯äº‘","slug":"è¯äº‘","link":"/tags/è¯äº‘/"},{"name":"ä»£ç†","slug":"ä»£ç†","link":"/tags/ä»£ç†/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"},{"name":"å›¾ç‰‡å‹ç¼©","slug":"å›¾ç‰‡å‹ç¼©","link":"/tags/å›¾ç‰‡å‹ç¼©/"},{"name":"CDN","slug":"CDN","link":"/tags/CDN/"},{"name":"MySQL","slug":"MySQL","link":"/tags/MySQL/"},{"name":"Selenium","slug":"Selenium","link":"/tags/Selenium/"}],"categories":[{"name":"å»ºç«™å®å½•","slug":"å»ºç«™å®å½•","link":"/categories/å»ºç«™å®å½•/"},{"name":"å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“","slug":"å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“","link":"/categories/å¿µå¿µä¸å¿˜ï¼Œå¿…æœ‰å›å“/"},{"name":"æ•°æ®æŠ“å–","slug":"æ•°æ®æŠ“å–","link":"/categories/æ•°æ®æŠ“å–/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","link":"/categories/æ•°æ®ç»“æ„ä¸ç®—æ³•/"},{"name":"è¶³è¿¹å›¾","slug":"å»ºç«™å®å½•/è¶³è¿¹å›¾","link":"/categories/å»ºç«™å®å½•/è¶³è¿¹å›¾/"},{"name":"è±†ç“£","slug":"æ•°æ®æŠ“å–/è±†ç“£","link":"/categories/æ•°æ®æŠ“å–/è±†ç“£/"},{"name":"äºŒåˆ†æŸ¥æ‰¾","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•/äºŒåˆ†æŸ¥æ‰¾","link":"/categories/æ•°æ®ç»“æ„ä¸ç®—æ³•/äºŒåˆ†æŸ¥æ‰¾/"},{"name":"äºŒå‰æ ‘","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•/äºŒå‰æ ‘","link":"/categories/æ•°æ®ç»“æ„ä¸ç®—æ³•/äºŒå‰æ ‘/"},{"name":"çŸ¥ä¹","slug":"æ•°æ®æŠ“å–/çŸ¥ä¹","link":"/categories/æ•°æ®æŠ“å–/çŸ¥ä¹/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ•°æ®æŠ“å–/è±†ç“£/æ­£åˆ™è¡¨è¾¾å¼","link":"/categories/æ•°æ®æŠ“å–/è±†ç“£/æ­£åˆ™è¡¨è¾¾å¼/"},{"name":"Vue","slug":"Vue","link":"/categories/Vue/"},{"name":"é™æ€èµ„æºåŠ é€Ÿ","slug":"å»ºç«™å®å½•/é™æ€èµ„æºåŠ é€Ÿ","link":"/categories/å»ºç«™å®å½•/é™æ€èµ„æºåŠ é€Ÿ/"},{"name":"åŸºç¡€åŸç†ç±»","slug":"Vue/åŸºç¡€åŸç†ç±»","link":"/categories/Vue/åŸºç¡€åŸç†ç±»/"},{"name":"ç½‘æ˜“äº‘éŸ³ä¹","slug":"æ•°æ®æŠ“å–/ç½‘æ˜“äº‘éŸ³ä¹","link":"/categories/æ•°æ®æŠ“å–/ç½‘æ˜“äº‘éŸ³ä¹/"}]}